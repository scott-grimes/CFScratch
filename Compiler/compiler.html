<!DOCTYPE html>
<html>
<title>Comipler Page</title></title>
<head>
<script src="Compiler.js"
    type="text/javascript"></script><script>
/**
 * A translator from our high level language to our VM language
 */



window.onload = function() {
    
    var initialMessage = "/** \n\
 * Represents an array. Can be used to hold any type of object. \n\
 */ \n\
class Array { \n\
 \n\
    /** Constructs a new Array of the given size. */ \n\
    function Array new(int size) { \n\
     \n\
    //Array size must be positive \n\
    if(size<0){ \n\
    do Sys.error(1); \n\
    } \n\
     \n\
    return Memory.alloc(size); \n\
    } \n\
 \n\
    /** De-allocates the array and frees its space. */ \n\
    method void dispose() { \n\
    do Memory.deAlloc(this); \n\
    return; \n\
    } \n\
}";
    
   document.getElementById("inputBox").value = initialMessage;
    
   document.getElementById("runbutton").onclick = function () {
   var jackTest = document.getElementById("inputBox").value;
   
   var m = document.getElementById("outputBox");
   var m1 = document.getElementById("compilerMessage");
   var answer;
   m1.value = 'Compiling...';
   try{
       m.value = '';
       var a = new Analyzer(jackTest);
       
       while(a.hasMoreTokens()){
           var token = a.advance();
           m.value += token+'\t\t\t('+a.tokenType(token)+')\n';
       }
       m1.value = 'Analyzed Successfully!'
   }
   catch(err){
       m.value = '';
       m1.value = 'Error: '+err;
   
   }
   
}
}
    
</script>
</head>
<body>
<textarea id="inputBox" rows="10" cols="60">
@3
</textarea>
<br>
<button type="button" id="runbutton" >Compile</button>
<input type="text" id="compilerMessage" size="44" readonly><br>
<br>
<textarea id="outputBox" rows="10" cols="60" readonly>
</textarea>
</body>
</html>
